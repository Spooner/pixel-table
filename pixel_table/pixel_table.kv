<PixelGrid>:
    size: root.height, root.height


<PixelTable>:
    pixel_grid: pixel_grid
    mode_container: mode_container
    mode_dropdown: mode_dropdown
    mode_button: mode_button

    canvas.before:
        Color:
            rgb: 0.3, 0.3, 0.3
        Rectangle:
            pos:  self.pos
            size: self.size

    BoxLayout:
        orientation: 'horizontal'
        size: root.size

        PixelGrid:
            id: pixel_grid
            size_hint_x: None

        BoxLayout:
            orientation: 'vertical'

            Button:
                id: mode_button
                on_release: mode_dropdown.open(self)
                height: 40
                size_hint_y: None

            DropDown:
                id: mode_dropdown

            BoxLayout:
                id: mode_container


#<ColorDialog>:
#    color_picker: color_picker
#    ColorPicker:
#        id: color_picker

<PaintColor@Widget>:
    color: 1, 1, 1
    height: 32
    canvas:
        Color:
            rgb: self.color
        Rectangle:
            pos: self.pos
            size: self.size

<Paint>:
    color: color
    tool: initial_tool

    BoxLayout:
        orientation: 'vertical'

        PaintColor:
            id: color
            size_hint_y: None

        GridLayout:
            cols: 2
            spacing: 4
            row_default_height: 32
            row_force_default: True
            Pencil:
                root: root
                state: 'down'
                id: initial_tool
            Eraser:
                root: root
            Dropper:
                root: root


<MatrixRain>:
    num_drops: num_drops

    BoxLayout:
        orientation: 'vertical'

        Label:
            text: "Number of drops: %d" % num_drops.value
            size_hint_y: None
            halign: 'left'

        Slider:
            id: num_drops
            orientation: 'horizontal'
            size_hint_y: None
            min: 1
            max: 1000
            value: 12
            step: 1
            on_value: root.update_num_drops(args[1])